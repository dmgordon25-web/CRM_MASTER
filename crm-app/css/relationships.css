[data-ui="relationships-map"]{margin-top:16px;padding-top:12px;border-top:1px solid rgba(15,23,42,0.08);}
.rel-map-root{position:relative;background:var(--surface-panel);border:1px solid rgba(15,23,42,0.08);border-radius:var(--radius-lg,16px);padding:16px;box-shadow:0 8px 24px rgba(15,23,42,0.06);}
.rel-map-board{position:relative;min-height:280px;}
.rel-map-columns{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:24px;position:relative;z-index:1;}
.rel-map-column{display:flex;flex-direction:column;gap:10px;}
.rel-map-edges{position:absolute;inset:0;pointer-events:none;}
.rel-node,.rel-fallback-node{--rel-accent:var(--accent-other);display:flex;align-items:center;gap:12px;width:100%;text-align:left;border:1px solid rgba(15,23,42,0.08);border-radius:14px;background:var(--surface-panel);box-shadow:inset 4px 0 0 color-mix(in srgb,var(--rel-accent) 90%,transparent);padding:10px 14px 10px 18px;color:var(--ink);font:inherit;cursor:pointer;transition:transform 120ms ease-out,box-shadow 120ms ease-out,opacity 120ms ease-out;}
.rel-node.contact,.rel-fallback-node.rel-contact{--rel-accent:var(--accent-contact);}
.rel-node.partner,.rel-fallback-node.rel-partner{--rel-accent:var(--accent-task);}
.rel-node:hover,.rel-fallback-node:hover{transform:translateX(2px);}
.rel-node:focus-visible,.rel-fallback-node:focus-visible,.rel-node.is-active{box-shadow:inset 4px 0 0 var(--rel-accent),0 0 0 1px color-mix(in srgb,var(--rel-accent) 40%,transparent);}
.rel-node.is-active{background:color-mix(in srgb,var(--rel-accent) 18%,var(--surface-panel));}
.rel-node.is-linked{opacity:0.95;box-shadow:inset 4px 0 0 color-mix(in srgb,var(--rel-accent) 70%,transparent);}
.rel-node:not(.is-active):not(.is-linked){opacity:0.78;}
.rel-node-label{flex:1;font-weight:600;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.rel-node-detail{flex:0 1 auto;font-size:12px;color:var(--text-muted);white-space:nowrap;}
.rel-node-count{flex:0 0 auto;min-width:28px;display:inline-flex;justify-content:center;align-items:center;font-weight:700;font-size:12px;padding:2px 8px;border-radius:999px;background:var(--rel-accent);color:var(--primary-text);}
.rel-edge{stroke:rgba(15,23,42,0.18);stroke-width:1.6;stroke-linecap:round;opacity:0.7;transition:stroke 160ms ease-out,stroke-width 160ms ease-out,opacity 160ms ease-out;}
.rel-edge.is-linked{opacity:1;stroke-width:2.6;stroke:color-mix(in srgb,var(--accent-contact) 55%,var(--accent-task) 45%);}
.rel-map-fallback .rel-fallback-shell{background:var(--surface-panel);border:1px solid rgba(15,23,42,0.08);border-radius:var(--radius-lg,16px);padding:16px;display:flex;flex-direction:column;gap:12px;box-shadow:0 8px 24px rgba(15,23,42,0.06);}
.rel-fallback-title{margin:0;font-size:16px;font-weight:700;}
.rel-fallback-help{margin:0;color:var(--text-muted);font-size:14px;}
.rel-fallback-search{display:flex;flex-direction:column;gap:6px;font-size:13px;color:var(--text-muted);}
.rel-fallback-search input[type="search"]{font:inherit;padding:8px 10px;border-radius:10px;border:1px solid rgba(15,23,42,0.12);}
.rel-fallback-results{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px;}
.rel-fallback-node{font-weight:600;}
.rel-map-host .muted{color:var(--text-muted);}
@media(max-width:880px){.rel-map-columns{grid-template-columns:1fr;}.rel-map-board{min-height:400px;}}
