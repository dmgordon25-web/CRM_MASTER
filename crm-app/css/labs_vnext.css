main[data-ui="labs-root"] {
  --labs-card-padding: 24px;
  --labs-card-gap: 12px;
  --labs-header-height: 48px;
  --labs-header-padding-y: 12px;
  --labs-header-padding-x: 24px;
  --labs-header-font-size: 1rem;
  --labs-header-line-height: 1.35;
  --labs-header-weight: 700;
  --labs-body-padding-y: 12px;
  --labs-body-padding-x: 24px;
  --labs-body-gap: 12px;
  --labs-footer-padding-top: 8px;
  --labs-footer-padding-bottom: 12px;
  --labs-row-line-height: 1.5;
  --labs-pill-min-height: 28px;
  --labs-pill-line-height: 1.25;
  --labs-empty-padding: 24px;

  --dash-card-pad: var(--labs-card-padding, 24px);
  --dash-card-header-h: var(--labs-header-height, 48px);
  --dash-title-size: var(--labs-header-font-size, 1rem);
  --dash-title-weight: var(--labs-header-weight, 700);
  --dash-body-pad: var(--labs-body-padding-y, 12px);
  --dash-row-pad-y: var(--dash-compat-row-padding-y, 8px);
  --dash-row-gap: var(--dash-compat-row-gap, 8px);
  --dash-line-height: var(--labs-row-line-height, 1.5);

  width: 100%;
  max-width: 100%;
  margin: 0 auto;
}

main[data-ui="labs-root"] .labs-crm-dashboard,
main[data-ui="labs-root"] .labs-section-host,
main[data-ui="labs-root"] .labs-grid-shell,
main[data-ui="labs-root"] .labs-crm-grid,
main[data-ui="labs-root"] .grid-stack {
  width: 100%;
  max-width: none;
  box-sizing: border-box;
}

main[data-ui="labs-root"] .labs-crm-grid.grid-stack {
  display: block;
  position: relative;
  grid-template-columns: none;
}

main[data-ui="labs-root"] .grid-stack > .grid-stack-item {
  min-width: 0;
}

main[data-ui="labs-root"] .grid-stack-item-content {
  overflow: visible;
}

.labs-widget--chrome {
  padding: 0;
  gap: 0;
  line-height: var(--dash-line-height, 1.5);
}

.labs-widget-chrome__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--dash-body-pad, 12px) var(--dash-card-pad, 24px);
  border-bottom: 1px solid var(--labs-border);
  gap: 8px;
  min-height: var(--dash-card-header-h, 48px);
}

.labs-widget-chrome__title {
  font-weight: var(--dash-title-weight, 700);
  font-size: var(--dash-title-size, 1rem);
  color: var(--labs-text-primary);
  line-height: var(--dash-line-height, 1.5);
  flex: 1 1 auto;
}

.labs-widget-chrome__controls {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-left: auto;
  flex-shrink: 0;
}

.labs-widget-chrome__count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 4px 10px;
  min-height: var(--labs-pill-min-height, 28px);
  min-width: 44px;
  border-radius: 999px;
  border: 1px solid var(--labs-border);
  background: #f8fafc;
  font-weight: 700;
  font-size: 0.9rem;
  color: var(--labs-text-primary);
  line-height: 20px;
  box-sizing: border-box;
}

.labs-widget-chrome__help {
  border: 1px solid var(--labs-border);
  background: #ffffff;
  border-radius: 999px;
  width: 28px;
  height: 28px;
  font-weight: 800;
  color: var(--labs-text-secondary);
  cursor: pointer;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

.labs-widget-chrome__body,
.labs-widget-body {
  padding: var(--labs-body-padding-y, 12px) var(--labs-body-padding-x, 24px);
  gap: var(--labs-body-gap, 12px);
}

.labs-widget-chrome__body .labs-widget__state {
  width: 100%;
  margin: 0;
  padding: var(--dash-card-pad, 24px);
}

.labs-widget-chrome__footer {
  padding: var(--labs-footer-padding-top, 8px) var(--labs-body-padding-x, 24px) var(--labs-footer-padding-bottom, 12px);
  border-top: 1px solid var(--labs-border);
  color: var(--labs-text-secondary);
  font-size: 0.9rem;
}

/* Labs list row normalization */
.labs-widget [data-role="priority-list"] {
  display: flex;
  flex-direction: column;
  gap: 0;
  margin: 0;
  padding: 0;
}

.labs-widget [data-role="priority-list"] > [data-role="priority-row"],
.labs-widget [data-role="today-row"] {
  display: flex;
  align-items: center;
  gap: var(--dash-row-gap, 8px);
  padding: calc(var(--dash-row-pad-y, 8px) - 2px) var(--dash-compat-row-padding-x, 12px);
  border-radius: 8px;
  line-height: var(--dash-compat-row-line-height, 1.5);
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--labs-border, #e2e8f0);
  min-height: 40px;
  min-width: 0;
  font-size: 14px;
  transition: background-color 120ms ease, border-color 120ms ease, box-shadow 120ms ease;
}

.labs-widget [data-role="priority-list"] > [data-role="priority-row"]:last-child,
.labs-widget [data-role="today-row"]:last-child {
  border-bottom: none;
}

.labs-widget [data-role="priority-row"]:hover,
.labs-widget [data-role="today-row"]:hover {
  background: #f8fafc;
  border-color: #cbd5e1;
  box-shadow: inset 0 -1px 0 var(--labs-border, #e2e8f0);
}

.labs-widget [data-role="priority-row"] .priority-pill {
  flex-shrink: 0;
  line-height: 1.4;
}

.labs-widget [data-role="priority-row"] .priority-label {
  flex: 1;
  min-width: 0;
  font-weight: 700;
  color: var(--labs-text-primary, #0f172a);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.labs-widget [data-role="today-row"] > .row {
  width: 100%;
  align-items: center;
  gap: var(--dash-compat-row-gap, 8px);
  flex-wrap: nowrap;
  min-width: 0;
}

.labs-widget [data-role="today-row"] .grow {
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.labs-widget [data-role="today-row"] .grow strong {
  display: block;
  font-size: 14px;
  line-height: var(--dash-compat-row-line-height, 1.5);
  color: var(--labs-text-primary, #0f172a);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.labs-widget [data-role="today-row"] .grow .muted {
  font-size: 12px;
  line-height: var(--dash-compat-row-line-height, 1.5);
  color: var(--labs-text-secondary, #475569);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

#priority-actions-card .labs-widget-body,
#todays-work-card .labs-widget-body,
[data-body-viewport="list"] .labs-widget-body,
.labs-widget-body[data-body-viewport="list"] {
  max-height: min(420px, 55vh);
  overflow: auto;
  overscroll-behavior: contain;
}

/* Unified list rows (Labs + zNext) */
.labs-widget .labs-row-list {
  display: flex;
  flex-direction: column;
  gap: 0;
  margin: 0;
  padding: 0;
}

.labs-widget .labs-row-list > .labs-row {
  padding: calc(var(--dash-row-pad-y, 8px) - 2px) 0;
  border-bottom: 1px solid var(--labs-border, #e2e8f0);
}

.labs-widget .labs-row-list > .labs-row:last-child {
  border-bottom: none;
}

.labs-widget .labs-row,
.labs-widget [data-role$="-row"] {
  display: flex;
  align-items: center;
  gap: var(--dash-row-gap, 8px);
  min-width: 0;
  padding-inline: var(--dash-compat-row-padding-x, 12px);
  line-height: var(--dash-line-height, 1.5);
  border-radius: 8px;
  transition: background-color 120ms ease, box-shadow 120ms ease, border-color 120ms ease;
}

.labs-widget .labs-row:hover,
.labs-widget .labs-row--clickable:hover,
.labs-widget [data-role$="-row"]:hover {
  background: #f8fafc;
  box-shadow: inset 0 -1px 0 var(--labs-border, #e2e8f0);
}

.labs-widget .labs-row__main {
  display: flex;
  align-items: center;
  gap: var(--dash-row-gap, 8px);
  min-width: 0;
}

.labs-widget .labs-row__badge {
  flex-shrink: 0;
  min-width: 32px;
  height: 32px;
  border-radius: 8px;
  background: rgba(99, 102, 241, 0.08);
  color: var(--labs-text-primary, #0f172a);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
}

.labs-widget .labs-row__text {
  display: flex;
  flex-direction: column;
  gap: 3px;
  min-width: 0;
}

.labs-widget .labs-row__primary {
  font-weight: 700;
  color: var(--labs-text-primary, #0f172a);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.labs-widget .labs-row__secondary {
  font-size: 0.9rem;
  color: var(--labs-text-secondary, #475569);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.labs-widget .labs-row__meta {
  margin-left: auto;
  font-weight: 700;
  color: var(--labs-text-primary, #0f172a);
  font-size: 0.9rem;
  white-space: nowrap;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.labs-widget .labs-row__meta.is-positive { color: #16a34a; }
.labs-widget .labs-row__meta.is-negative { color: #dc2626; }
.labs-widget .labs-row__meta.is-neutral { color: var(--labs-text-secondary, #475569); }
